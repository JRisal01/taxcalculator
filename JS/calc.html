
let buttom = document.getElementsByClassName('tax_calculate');
let reset_buttom = document.getElementsByClassName('input_reset');

function reset_field(){
    document.getElementById("marriage").value = 'married';
    document.getElementById("gender").value = 'male';
    document.getElementById("salary").value = '';
    document.getElementById("salary_time_period").value = 'monthly';
    document.getElementById("festival_bonus").value = '';
    document.getElementById("allowance").value = '';
    document.getElementById("others_income").value = '';
    document.getElementById("provident").value = '';
    document.getElementById("cit").value = '';
    document.getElementById("insurance").value = '';
    document.getElementById('annual_gross_salary').innerText = '0';
    document.getElementById('taxableIncome').innerText = '0';
    document.getElementById('payableTax').innerText = '0'
    document.getElementById('payableTaxPersentage').innerText = '0%';
}

reset_buttom[0].addEventListener('click', function () {
    reset_field();
})

buttom[0].addEventListener('click', function () {
    var marriage_status = document.getElementById("marriage").value;
    var gender = document.getElementById("gender").value;
    var salary = document.getElementById("salary").value;
    var salary_time_period = document.getElementById("salary_time_period").value;
    var festival_bonus = document.getElementById("festival_bonus").value;
    var allowance = document.getElementById("allowance").value;
    var others_income = document.getElementById("others_income").value;
    var provident = document.getElementById("provident").value;         
    var cit = document.getElementById("cit").value;
    var insurance = document.getElementById("insurance").value;

    // reset_field();

    // console.log(marriage_status);
    // console.log(gender);
    // // console.log(salary);
    // console.log(salary_time_period);
    // console.log(festival_bonus);
    // console.log(allowance);
    // console.log(others_income);
    // console.log(provident);
    // console.log(cit);
    // console.log(insurance);

    if (salary_time_period == 'monthly') {
        salary = salary * 12;
    }

    var totalIncome = parseInt(salary) + parseInt(festival_bonus) + parseInt(allowance) + parseInt(others_income);
    var deductionAmount = parseInt(provident) + parseInt(cit) + parseInt(insurance);
    document.getElementById('annual_gross_salary').innerText = 'Rs.' + totalIncome;
    var taxableIncome = totalIncome - deductionAmount
    document.getElementById('taxableIncome').innerText = 'Rs.' + taxableIncome;
    //console.log(taxableIncome);


    function taxLessThan4lakhs(amt) {
        var payableTax = 1 / 100 * amt;
        return payableTax
    }

    function plus1Lakh(amt) {
        var payableTax = 10 / 100 * amt;
        return payableTax
    }

    function plus2Lakh(amt) {
        var payableTax = 20 / 100 * amt;
        return payableTax
    }

    function plus13Lakh(amt) {
        var payableTax = 30 / 100 * amt;
        return payableTax
    }

    function above20lakh(amt) {
        var payableTax = 36 / 100 * amt;
        return payableTax
    }

    var totalPayableTax = 0;
    var taxUpTo4Lakhs
    var additional1Lakhs
    var additional2Lakhs
    var additional13Lakhs
    var moreThan20Lakhs

    if (marriage_status == 'unmarried') {
        if (taxableIncome <= 400000) {
            taxUpTo4Lakhs = taxLessThan4lakhs(taxableIncome);
            totalPayableTax = taxUpTo4Lakhs;
        } else if (taxableIncome <= (400000 + 100000)) {
            taxUpTo4Lakhs = taxLessThan4lakhs(400000);
            additional1Lakhs = plus1Lakh(taxableIncome - 400000);
            totalPayableTax = taxUpTo4Lakhs + additional1Lakhs;
        } else if (taxableIncome <= (400000 + 100000 + 200000)) {
            taxUpTo4Lakhs = taxLessThan4lakhs(400000);
            additional1Lakhs = plus1Lakh(100000);
            additional2Lakhs = plus2Lakh(taxableIncome - 400000 - 100000);
            totalPayableTax = taxUpTo4Lakhs + additional1Lakhs + additional2Lakhs;
        } else if (taxableIncome <= (400000 + 100000 + 200000 + 1300000)) {
            taxUpTo4Lakhs = taxLessThan4lakhs(400000);
            additional1Lakhs = plus1Lakh(100000);
            additional2Lakhs = plus2Lakh(200000);
            additional13Lakhs = plus13Lakh(taxableIncome - 400000 - 100000 - 200000);
            totalPayableTax = taxUpTo4Lakhs + additional1Lakhs + additional2Lakhs + additional13Lakhs;
        } else {
            taxUpTo4Lakhs = taxLessThan4lakhs(400000);
            additional1Lakhs = plus1Lakh(100000);
            additional2Lakhs = plus2Lakh(200000);
            additional13Lakhs = plus13Lakh(1300000);
            moreThan20Lakhs = above20lakh(taxableIncome - 400000 - 100000 - 200000 - 1300000);
            totalPayableTax = taxUpTo4Lakhs + additional1Lakhs + additional2Lakhs + additional13Lakhs + moreThan20Lakhs;
        }
    }

    else{
        if (taxableIncome <= 450000) {
            taxUpTo4Lakhs = taxLessThan4lakhs(taxableIncome);
            totalPayableTax = taxUpTo4Lakhs;
        } else if (taxableIncome <= (450000 + 100000)) {
            taxUpTo4Lakhs = taxLessThan4lakhs(450000);
            additional1Lakhs = plus1Lakh(taxableIncome - 450000);
            totalPayableTax = taxUpTo4Lakhs + additional1Lakhs;
        } else if (taxableIncome <= (450000 + 100000 + 200000)) {
            taxUpTo4Lakhs = taxLessThan4lakhs(450000);
            additional1Lakhs = plus1Lakh(100000);
            additional2Lakhs = plus2Lakh(taxableIncome - 450000 - 100000);
            totalPayableTax = taxUpTo4Lakhs + additional1Lakhs + additional2Lakhs;
        } else if (taxableIncome <= (450000 + 100000 + 200000 + 1250000)) {
            taxUpTo4Lakhs = taxLessThan4lakhs(450000);
            additional1Lakhs = plus1Lakh(100000);
            additional2Lakhs = plus2Lakh(200000);
            additional13Lakhs = plus13Lakh(taxableIncome - 450000 - 100000 - 200000);
            totalPayableTax = taxUpTo4Lakhs + additional1Lakhs + additional2Lakhs + additional13Lakhs;
        } else {
            taxUpTo4Lakhs = taxLessThan4lakhs(450000);
            additional1Lakhs = plus1Lakh(100000);
            additional2Lakhs = plus2Lakh(200000);
            additional13Lakhs = plus13Lakh(1250000);
            moreThan20Lakhs = above20lakh(taxableIncome - 450000 - 100000 - 200000 - 1250000);
            totalPayableTax = taxUpTo4Lakhs + additional1Lakhs + additional2Lakhs + additional13Lakhs + moreThan20Lakhs;
        }
    }
    document.getElementById('payableTax').innerText = 'Rs.' + totalPayableTax;
    var payedTaxPersentage = (totalPayableTax / taxableIncome) * 100;
    document.getElementById('payableTaxPersentage').innerText = payedTaxPersentage + '%';
})
